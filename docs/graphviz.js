/* docs/graphviz.js 1.0.0 */
!function(e){"use strict";var n,r,t,i,o,a,d,s="1.0.0",u=void 0!==u?u:"undefined"!=typeof window?window:this;function l(){return"devicePixelRatio"in window&&window.devicePixelRatio>1?window.devicePixelRatio:1}console.log.bind(console),Object.defineProperty(e,"__esModule",{value:!0}),n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")},t=function(){function e(e,n){var r,t;for(r=0;r<n.length;r++)(t=n[r]).enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}return function(n,r,t){return r&&e(n.prototype,r),t&&e(n,t),n}}(),i=Object.assign||function(e){var n,r,t;for(n=1;n<arguments.length;n++)for(t in r=arguments[n])Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e},o=function(){function e(n){var t=this;r(this,e),this.worker=n,this.listeners=[],this.nextId=0,this.worker.addEventListener("message",function(e){var n=e.data.id,r=e.data.error,i=e.data.result;t.listeners[n](r,i),delete t.listeners[n]})}return t(e,[{key:"render",value:function(e,n){var r=this;return new Promise(function(t,i){var o=r.nextId++;r.listeners[o]=function(e,n){e?i(new Error(e.message,e.fileName,e.lineNumber)):t(n)},r.worker.postMessage({id:o,src:e,options:n})})}}]),e}(),a=function e(n,t){r(this,e);var i=n();this.render=function(e,n){return new Promise(function(r,o){try{r(t(i,e,n))}catch(e){o(e)}})}},d=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.workerURL,i=n.worker,d=n.Module,s=n.render;if(r(this,e),void 0!==t)this.wrapper=new o(new Worker(t));else if(void 0!==i)this.wrapper=new o(i);else if(void 0!==d&&void 0!==s)this.wrapper=new a(d,s);else{if(void 0===e.Module||void 0===e.render)throw new Error("Must specify workerURL or worker option, Module and render options, or include one of full.render.js or lite.render.js after viz.js.");this.wrapper=new a(e.Module,e.render)}}return t(e,[{key:"renderString",value:function(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r.format,i=void 0===t?"svg":t,o=r.engine,a=void 0===o?"dot":o,d=r.files,s=void 0===d?[]:d,u=r.images,l=void 0===u?[]:u,c=r.yInvert,f=void 0!==c&&c,g=r.nop,h=void 0===g?0:g;for(n=0;n<l.length;n++)s.push({path:l[n].path,data:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg width="'+l[n].width+'" height="'+l[n].height+'"></svg>'});return this.wrapper.render(e,{format:i,engine:a,files:s,images:l,yInvert:f,nop:h})}},{key:"renderSVGElement",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.renderString(e,i({},n,{format:"svg"})).then(function(e){return(new DOMParser).parseFromString(e,"image/svg+xml").documentElement})}},{key:"renderImageElement",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r.scale,o=r.mimeType,a=r.quality;return this.renderString(e,i({},r,{format:"svg"})).then(function(e){return"object"===("undefined"==typeof fabric?"undefined":n(fabric))&&fabric.loadSVGFromString?function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.scale,t=void 0===r?l():r,i=n.mimeType,o=void 0===i?"image/png":i,a=n.quality,d=void 0===a?1:a,s=t,u=void 0;return"image/jpeg"==o?u="jpeg":"image/png"==o&&(u="png"),new Promise(function(n,r){fabric.loadSVGFromString(e,function(e,t){var i,o,a,l;0==e.length&&r(new Error("Error loading SVG with Fabric")),(i=document.createElement("canvas")).width=t.width,i.height=t.height,o=new fabric.Canvas(i,{enableRetinaScaling:!1}),a=fabric.util.groupSVGElements(e,t),o.add(a).renderAll(),(l=new Image).src=o.toDataURL({format:u,multiplier:s,quality:d}),l.width=t.width,l.height=t.height,n(l)})})}(e,{scale:t,mimeType:o,quality:a}):function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.scale,t=void 0===r?l():r,i=n.mimeType,o=void 0===i?"image/png":i,a=n.quality,d=void 0===a?1:a;return new Promise(function(n,r){var i=new Image;i.onload=function(){var e=document.createElement("canvas");e.width=i.width*t,e.height=i.height*t,e.getContext("2d").drawImage(i,0,0,e.width,e.height),e.toBlob(function(e){var r=new Image;r.src=URL.createObjectURL(e),r.width=i.width,r.height=i.height,n(r)},o,d)},i.onerror=function(e){var n;n="error"in e?e.error:new Error("Error loading SVG"),r(n)},i.src="data:image/svg+xml;base64,"+btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,n){return String.fromCharCode("0x"+n)}))})}(e,{scale:t,mimeType:o,quality:a})})}},{key:"renderJSONObject",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.format;return"json"===r&&"json0"===r||(r="json"),this.renderString(e,i({},n,{format:r})).then(function(e){return JSON.parse(e)})}}]),e}();const c=s,f=new Error("timeout");let g;function h(){g&&g.wrapper.worker.terminate(),(g=new d({workerURL:"viz-worker.js?v="+s})).renderString("digraph G {}",{format:"svg",engine:"dot"}).catch(()=>{})}h(),e.TimeoutError=f,e.layout=function(e,n,r,t){return new Promise((i,o)=>{let a;return t&&t>0&&(a=setTimeout(()=>{h(),o(f)},t)),g.renderString(e,{format:n||"svg",engine:r||"dot"}).then(i).catch(e=>{clearTimeout(a),h(),o(e)})})},e.version=c}("undefined"!=typeof exports?exports:("undefined"!=typeof global?global:"undefined"!=typeof self?self:this).graphviz={});
//#sourceMappingURL=graphviz.js.map
